<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Data ingestion: Fluentd or Logstash. That&#x27;s the question - EA1HET / 0x30.io</title><meta name="description" content="IntroductionWhile preparing a stack for a project this summer I came across the decision to use a data ingestion tool and, after some days analysing different tools, the last two on the table were Fluentd and Logstash. So, I decided to research a bit and do my tests."><meta name="robots" content="index, follow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://0x30.io/data-ingestion-fluentd-or-logstash-thats-the-question/"><link rel="amphtml" href="https://0x30.io/amp/data-ingestion-fluentd-or-logstash-thats-the-question/"><link rel="alternate" type="application/atom+xml" href="https://0x30.io/feed.xml"><link rel="alternate" type="application/json" href="https://0x30.io/feed.json"><link rel="shortcut icon" href="https://0x30.io/media/website/favicon.ico" type="image/x-icon"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Roboto:400,500&amp;subset=latin-ext&amp;display=swap" rel="stylesheet"><link rel="stylesheet" href="https://0x30.io/assets/css/style.css?v=e208a3623e9e75c45cac1ae24b0104cb"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://0x30.io/data-ingestion-fluentd-or-logstash-thats-the-question/"},"headline":"Data ingestion: Fluentd or Logstash. That's the question","datePublished":"2017-08-15T00:24","dateModified":"2019-08-12T00:27","image":{"@type":"ImageObject","url":"https://0x30.io/media/posts/12/1.jpeg","height":400,"width":744},"description":"IntroductionWhile preparing a stack for a project this summer I came across the decision to use a data ingestion tool and, after some days analysing different tools, the last two on the table were Fluentd and Logstash. So, I decided to research a bit and do my tests.","author":{"@type":"Person","name":"Jonathan Gonzalez"},"publisher":{"@type":"Organization","name":"Jonathan Gonzalez"}}</script><script async src="https://0x30.io/assets/js/lazysizes.min.js?v=300b16f1c14e1537e6b064f464ab33b1"></script></head><body><header class="topbar js-top is-sticky"><div class="topbar__inner"><a class="logo" href="https://0x30.io/">EA1HET / 0x30.io</a><nav class="navbar js-navbar"><button class="navbar__toggle js-navbar__toggle">Menu</button><ul class="navbar__menu"><li><a href="https://0x30.io/" title="Home" target="_self">Home</a></li><li class="has-submenu"><span>Professional</span><ul class="navbar__submenu"><li><a href="https://0x30.io/tags/cybersecurity/" target="_self">CyberSecurity</a></li><li><a href="https://0x30.io/tags/devops/" target="_self">DevOps</a></li><li><a href="https://0x30.io/tags/data/" target="_self">Data</a></li></ul></li><li class="has-submenu"><span>Amateur</span><ul class="navbar__submenu"><li><a href="https://0x30.io/ham-radio-software/" target="_self">Ham Radio software</a></li><li><a href="https://0x30.io/tags/iot/" target="_self">IoT</a></li></ul></li><li><a href="https://0x30.io/ham-radio/" target="_self">Ham Radio</a></li><li><a href="https://0x30.io/about-me/" target="_self">About me</a></li><li><a href="https://0x30.io/feed" target="_self">Feed</a></li></ul></nav></div></header><div class="content"><div class="infobar"><div class="infobar__update">Last Updated: <time datetime="2019-10-19T07:01">19/10/2019</time></div><div class="infobar__search"><form action="https://0x30.io/search.html"><input type="search" name="q" placeholder=" search..."></form></div></div><main class="main"><article class="post"><figure class="post__featured-image" style="padding-bottom: calc(400/744 * 100%)"><img class="lazyload" src="https://0x30.io/media/posts/12/responsive/1-xs.jpeg" data-srcset="https://0x30.io/media/posts/12/responsive/1-xs.jpeg 300w ,https://0x30.io/media/posts/12/responsive/1-sm.jpeg 480w ,https://0x30.io/media/posts/12/responsive/1-md.jpeg 768w ,https://0x30.io/media/posts/12/responsive/1-lg.jpeg 1024w ,https://0x30.io/media/posts/12/responsive/1-xl.jpeg 1360w ,https://0x30.io/media/posts/12/responsive/1-2xl.jpeg 1600w" data-sizes="auto" alt=""></figure><header class="u-header post__header"><h1>Data ingestion: Fluentd or Logstash. That&#x27;s the question</h1><div class="u-header__meta u-small"><img class="lazyload u-header__avatar" data-src="https://0x30.io/media/website/avatar_010-150x150.png" alt="Jonathan Gonzalez"><div><a href="https://0x30.io/authors/ea1het/" title="Jonathan Gonzalez">Jonathan Gonzalez</a> <time datetime="2017-08-15T00:24">15/08/2017 </time><a href="https://0x30.io/tags/data/" class="u-tag u-tag--1">Data</a></div></div></header><div class="post__entry u-inner"><h2><strong>Introduction</strong></h2><p>While preparing a stack for a project this summer I came across the decision to use a data ingestion tool and, after some days analysing different tools, the last two on the table were <a href="https://www.fluentd.org/" target="_blank" rel="nofollow noopener noreferrer"><strong>Fluentd</strong></a> and <a href="https://www.elastic.co/products/logstash" target="_blank" rel="nofollow noopener noreferrer"><strong>Logstash</strong></a>. So, I decided to research a bit and do my tests. Following is the result of that work with both tools.</p><h2><strong>A bit of history and factual data</strong></h2><p>Logstash is well known for being part of the <a href="https://www.elastic.co/" target="_blank" rel="nofollow noopener noreferrer"><strong>ELK</strong></a> (Elasticsearch, Logstash, Kibana) stack. Fluentd is built by <a href="https://www.treasuredata.com/" target="_blank" rel="nofollow noopener noreferrer">Treasure Data</a> and is part of the <a href="https://www.cncf.io/" target="_blank" rel="nofollow noopener noreferrer">Cloud Native Computing Foundation (CNCF)</a> portfolio of tools that are increasingly used by many renamed DevOps-oriented communities like <a href="https://docs.docker.com/reference/logging/fluentd/" target="_blank" rel="nofollow noopener noreferrer"><strong>Docker</strong></a>, <a href="https://github.com/GoogleCloudPlatform/google-fluentd" target="_blank" rel="nofollow noopener noreferrer"><strong>Google Cloud Platform (GCP)</strong></a> and even Elasticsearch.</p><p><u>If you plan on using Elastic products</u> or the whole suite, then <u>you should tend to prefer Logstash</u> (although Fluentd also has excellent support for Elastic). On the other hand, <u>if you’re using any CNCF hosted project (e.g. Kubernetes, OpenTracing or Prometheus), you should probably go with Fluentd </u>prefereably.</p><h2><strong>Some brief technical stuff to mention and not to forget</strong></h2><ul><li>Both platforms can run either on Linux or Windows.</li><li>Both can be configured to function in a multi-tier setup.</li><li>In both cases forwarders can detect failure of a shipper and switch to another active shipper when necessary. A data shipper is a software unit in charge of automating the backup of a database and transaction data or log files on a primary production server onto a secondary or standby server. A data forwarder is a vehicle that carries data from the origin point to a destination point.</li><li>Both deliver events to many different receivers, for instance readily supporting SQS, Elasticsearch, and S3.</li><li>Both handle JSON events natively.</li><li>Both are under active development.</li><li>Both use a plugin architecture and have their own plugin manager tools.</li><li>Event data on Logstash uses a single stream and then uses algorithmic if-then statements to send them to the right destination. Fluentd relies on tags to route events; each tag tells Fluentd where it wants to be routed. Fluentd’s approach is more declarative whereas Logstash’s method is procedural.</li></ul><p><strong><em>Update</em></strong><em> (by Aaron Mildenstein, Software Engineer at Elastic)</em><strong><em>:</em></strong><em> In Logstash 6.0 the product will fully support multiple, independent pipelines which can be stopped and started, and automatically reloaded on the fly.</em></p><ul><li>Plugins are managed differntly by both tools. In the case of Logstash it uses a centralized repository in GitHub whereas Fluentd is based on a decentralized model. Both have hundreds of plugins available to almost everything you can get data from: application logs, network protocols, IoT devices, container technologies, databases, orchestration engines, message protocols, mail services, monitoring tools.... just to name a few.</li><li>Transport technology is where the big differences appear in plain. When we talk about transport technology we are referring to the act and fact of gather data from disparate sources and "transport this data" to the correct destinations (a database, a data lake, another application, an API or whatever it should be). Logstash lacks an internal persistent mechanism. Currently, it has an on-memory queue that holds a determined number of events and relies on an external message queue system like Redis, Kafka, ZeroMQ or RabbitMQ for persistence across restarts and scalability. For me this is centainly an issue for Logstash, and the community has been requesting for long to persist the queue on-disk. Fluentd, on the other hand, has a highly configurable buffering system. It can be either in-memory or on-disk, thus, in comparison to Logstash we can say that Fluentd has built-in reliability and scalability characteristics. The downside with Fluentd is that its configuration might be difficult or even tricky for newbies. Beside this, there's another few things to bear in mind. Beats, the agent-like tool from Elastic sends data to Logstash with a minimal filtering capabilities, thus, it sends over the network pretty much everything it records. Fluent Bit, or Fluentd Forwarder, offers some extended filtering capabilities to reduce the amount of data sent over the network. For many that wouldn't be important enough, except for those who have their data infrastructure deployed on hybrid or public clouds. Every bit send or received counts and it has a price.</li></ul><p><strong><em>Update</em></strong><em> (by Aaron Mildenstein, Software Engineer at Elastic)</em><strong><em>:</em></strong><em> The persistent-queue feature has allowed persistence to disk for several point versions (in beta release form), and is now out of beta and fully supported. You can choose whether to use persist-to-disk, or the in-memory queue.</em></p><ul><li>In terms of support, unfortunately if I'm not wrong it seems that Logstash does not offer enterprise grade support for Logstash <em>per se</em>. Fluentd, on the other hand, does support enterprises.</li></ul><h2><strong>Some notes about performance</strong></h2><p>This is a grey area of discussion and I cannot provide more deep details than those already provided by the community of users. Asking colleagues on this point I came across the fact that Fluentd has a slightly better reputation when it comes to performance. In any case, from my personal point of view, the true thing is that both tools performed really well with high workloads. But, How high can they perform under the same tech specs?. This is some factual data I could gather:</p><ul><li>Logstash consumes around 100-150 MB of RAM; Fluentd consumes around 30-70 MB of RAM. For modern hardware infrastructure this is ridiculous, but the difference between applications when you are deploying a whole datacentre might become tens, hundreds or thousands of additional RAM gigabytes that must be paid, so, despite it is a hardly meaningful technical fact, we should not forget never any tech spec or fact.</li><li>For small machines, or IoT devices, Logstash uses Elastic Beats, a miniaturized agent to perform a set of the product capabilities. Same happens with Fluentd, that can deploy Fluentd Bit and Fluentd Forwarder for the same task.</li><li>In my tests I came accross some slowliness on Logstash, compared to Fluentd but the difference is imperceptible in the scales we usually work.</li></ul><h2>Conclusion</h2><p>Use either Logstash or Fluentd will depend on user experience and punctual project needs. We cannot remove from the picture the technology bias as well. That being said, Fluentd is written mostly in Ruby, with performance-sensitive parts written in C, and with a more convenient, pre-compiled stable version available. Fluentd also has a forwarder written in Go language, that provides an excelent performance. Logstash's forwarder is written in Go language too, while its shipper runs on JRuby, which requires the JVM. I don't like this, despite some people say that the JVM is a nice bless and hell if you are able to configure it well, but personally, I understand this is a serious overkill for a data shipper.</p><p>Finally, in terms of architecture, I feel myself more comfortable with Fluentd's pluggable architecture and built-in reliability and scalability features than with Logstash capabilities. The unified logging to JSON is another feature I like thinking on micro services and APIs, so, you can unify all facets of processing data: collecting, filtering, buffering, and outputting data across multiple sources and destinations.</p><p><strong><u>My actual bet, on a generic project, is for Fluentd.</u></strong></p><p>Best regards <em>(and thank you Aaron, for the udpate on Logstash)</em></p><h2>ARTICLE UPDATE:</h2><div id="ember199" class="comments-comment-item__post-meta feed-shared-post-meta is-comment feed-shared-post-meta--is-not-sponsored ember-view"><p class="feed-shared-post-meta__actor t-12 t-black--light t-normal"><span class="feed-shared-post-meta__name t-14 t-black t-bold"><span class="hoverable-link-text" data-entity-hovercard-id="urn:li:fs_miniProfile:ACoAAAAQr0wB2_ZZWNWRpxl-c5E23cwTGUW2KY8">According to Aaron Mildenstein, P</span></span><span class="feed-shared-post-meta__headline t-12 t-black--light t-normal">rincipal Consulting Architect at Elastic</span><span id="ember210" class="ember-view">Event, the fact that in the past data on Logstash needed to use a single stream and then uses algorithmic if-then statements to send them to the right destination will no longer be necessary for event routing starting on </span><span id="ember210" class="ember-view">Logstash 6.0. </span><span id="ember210" class="ember-view">It will fully support multiple, independent pipelines which can be stopped and started, and automatically reloaded on the fly.</span></p><p class="feed-shared-post-meta__actor t-12 t-black--light t-normal"><span id="ember210" class="ember-view">In the same sense, it also necessary to say that the persistent-queue feature has allowed persistence to disk for several point versions (in beta release form). You can choose whether to use persist-to-disk, or the in-memory queue.</span></p><p class="feed-shared-post-meta__actor t-12 t-black--light t-normal"><span id="ember210" class="ember-view">Finally, Logstash support is offered by Elastic as part of their support contract offerings which cover all Elastic products. It is accurate to state, however, that Elastic does not offer support for Logstash by itself.</span></p></div><div class="comments-comment-item-content-body"> </div></div><aside class="post__aside"><div class="post__last-updated u-small">This article was updated on 12/08/2019</div><div class="post__share"><a href="https://twitter.com/share?url=https%3A%2F%2F0x30.io%2Fdata-ingestion-fluentd-or-logstash-thats-the-question%2F&amp;via=ea1het&amp;text=Data%20ingestion%3A%20Fluentd%20or%20Logstash.%20That's%20the%20question" class="js-share twitter" title="Share with Twitter" rel="nofollow noopener noreferrer"><svg class="u-icon"><use xlink:href="https://0x30.io/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="http://www.linkedin.com/shareArticle?url=https%3A%2F%2F0x30.io%2Fdata-ingestion-fluentd-or-logstash-thats-the-question%2F&amp;title=Data%20ingestion%3A%20Fluentd%20or%20Logstash.%20That's%20the%20question" class="js-share linkedin" title="Share with LinkedIn" rel="nofollow noopener noreferrer"><svg class="u-icon"><use xlink:href="https://0x30.io/assets/svg/svg-map.svg#linkedin"/></svg></a></div></aside><footer class="post__footer"><ul class="post__tag box"><li><a href="https://0x30.io/tags/data/" class="u-tag u-tag--1" title="Data">Data</a></li><li><a href="https://0x30.io/tags/devops/" class="u-tag u-tag--1" title="DevOps">DevOps</a></li><li><a href="https://0x30.io/tags/professional/" class="u-tag u-tag--1" title="Professional">Professional</a></li></ul><nav class="post__nav box"><div class="post__nav__next"><a href="https://0x30.io/microservices-101/" class="post__nav__link" rel="next"><div class="u-small">Next Post<h5>Microservices 101</h5></div><img class="lazyload" src="https://0x30.io/media/posts/13/responsive/microservices-xs.png" data-srcset="https://0x30.io/media/posts/13/responsive/microservices-xs.png" data-expand="300" alt=""></a></div></nav><div class="post__related box"><h3 class="box__title">Related posts</h3><div class="post__related__wrap"><figure><a href="https://0x30.io/databases-per-use-type/"><img class="lazyload" src="https://0x30.io/media/posts/9/responsive/database-wordcloud-xs.jpg" data-srcset="https://0x30.io/media/posts/9/responsive/database-wordcloud-xs.jpg" data-expand="300" alt=""></a><figcaption><h4><a href="https://0x30.io/databases-per-use-type/" class="inverse">Databases per use type</a></h4><time datetime="2019-08-07T02:31" class="u-small">07/08/2019</time></figcaption></figure></div></div></footer></article></main><div class="sidebar"><section class="box"><h3 class="box__title">Authors</h3><ul class="authors"><li><a href="https://0x30.io/authors/ea1het/"><img data-src="https://0x30.io/media/website/avatar_010-150x150.png" class="lazyload authors__img" alt="Jonathan Gonzalez"></a><div><a href="https://0x30.io/authors/ea1het/" class="authors__title">Jonathan Gonzalez</a> <span class="u-small">Post: 10</span></div></li></ul></section><section class="box"><h3 class="box__title">Tags</h3><ul class="tags"><li><a href="https://0x30.io/tags/cybersecurity/">CyberSecurity</a> <span class="u-small">(3)</span></li><li><a href="https://0x30.io/tags/data/">Data</a> <span class="u-small">(2)</span></li><li><a href="https://0x30.io/tags/devops/">DevOps</a> <span class="u-small">(5)</span></li><li><a href="https://0x30.io/tags/hobby/">Hobby</a> <span class="u-small">(2)</span></li><li><a href="https://0x30.io/tags/iot/">IoT</a> <span class="u-small">(2)</span></li><li><a href="https://0x30.io/tags/professional/">Professional</a> <span class="u-small">(8)</span></li><li><a href="https://0x30.io/tags/software/">Software</a> <span class="u-small">(5)</span></li></ul></section></div><footer class="footer"><a class="footer__logo" href="https://0x30.io/">EA1HET / 0x30.io</a><nav><ul class="footer__nav"></ul></nav><div class="footer__copyright">This site is powered by Publii, the FOSS CMS for static websites</div></footer></div><script defer="defer" src="https://0x30.io/assets/js/jquery-3.2.1.slim.min.js?v=5f48fc77cac90c4778fa24ec9c57f37d"></script><script defer="defer" src="https://0x30.io/assets/js/scripts.min.js?v=07b53ae91f8045eab042a695e4a26034"></script></body></html>